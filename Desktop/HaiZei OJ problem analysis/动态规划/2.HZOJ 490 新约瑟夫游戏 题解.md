# HZOJ 490 新约瑟夫游戏

## 题目描述

 你一定听说过经典“约瑟夫”问题吧？现在来组织一个皆大欢喜的新游戏：假设 n 个人站成一圈，从第 1 人开始交替的去掉游戏者，但只是暂时去掉（例如，首先去掉 2），直到最后剩下唯一的幸存者为止。幸存者选出后，所有比幸存者号码高的人每人将得到 1 块钱，并且永久性地离开，其余剩下的人将重复以上过程，比幸存者号码高的人每人将得到 1 块钱后离开。一旦经过这样的过程后，人数不再减少，最后剩下的那些人将得到 2 块钱。请计算一下组织者一共要付出多少钱？



## 分析

这题使用了**编号映射的技巧**。我们设**状态$f(n)$含义为n个成员最后的幸存者的编号**，**递推与动态规划问题，只有是使用到了紧临的前状态，当然可以同时用前面的其他状态。**

当n个人玩游戏时，第一个人出局之后，剩下的人进行编号映射之后就变成了$f(n-1)$的问题。进而可以获得状态转移方程：
$$
f(n)=(f(n-1)+2)\mod n
$$


## 代码

```c++
#include<iostream>
using namespace std;

#define MAX_N 32767
int f[MAX_N + 5];

int main() {
    int n;
    cin >> n;
    f[1] = 1;
    for (int i = 2; i <= n; i++) {
        f[i] = (f[i - 1] + 2 - 1) % i + 1;
    }
    int x = n;
    while (f[x] - x) x = f[x];
    cout << n + x << endl;
    return 0;
}
```





