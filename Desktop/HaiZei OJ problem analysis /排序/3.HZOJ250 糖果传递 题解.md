# HZOJ 250 糖果交换 题解

## 题目描述

 有n个小朋友坐成一圈，每人有 ai 个糖果。每人只能给左右两人传递糖果。每人每次传递一个糖果代价为 1。求使所有人获得均等糖果的最小代价。



## 分析

首先，先分析对于**一维序列的非环形的求调整平均数代价的题目**，实际上是求解下面公式：
$$
\min(\sum_{i=1}^{m}|\sum_{j=1}^{i}{s_j}-i * c|)
$$
这是因为要调整第一个数字为平均数的代价是$|s_1-c|$，此时第二个人的糖果数为$s_2-|s1-c|$,调整代价为$|s_1+s_2-2*c|$ ，使用前缀和数组便于计算。

之后公式就变成了:
$$
\min(\sum_{i=1}^{m}|S_i-i*c|)
$$
再令$g_i=S_i-i * c$，$g_i$表示从第一个点开始调整的代价，显然最后一个点是不需要进行调整的，即$g_n=0$。

而这道题目是求**环状一维序列调整平均数代价的题目**，环状的一维序列求调整平均数的代价的题目，我们不一定是从第一个点开始的，即需要减少不必要的传递，那么不妨令
$$
s_k|s_{k+1},s_{k+2},....,s_n,s_1,..s_k
$$
环状的转换成一维的，在$s_n$之前的调整代价就是$|g_i-g_k|$，之后的是$|g_n+g_i-g_k|$，由于$g_n=0$，即$|g_i-g_k|$，那么就是求：
$$
\min(\sum_{i=1}^{n}(|g_i-g_k|))
$$
这实际上就是求中位数。



## 代码

