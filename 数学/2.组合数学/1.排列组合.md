# 排列组合

## 一、排列数与组合数

### 1. 排列数

从n个不同元素中，任取m （$m\le n$）个元素按照一定顺序排成一列，称为从n个不同元素中取出m个元素的一个排列。从n个不同元素中取出m （$m\le n$）个元素的所有排列的个数，叫做从n个不同元素中取出m个元素的排列数，使用符号$A_n^m$或$P_n^m$表示 （Arrange，Permute）。
$$
A_n^m=n(n-1)(n-2)...(n-m+1)=\frac{n!}{(n-m)!}
$$

### 2. 组合数

从n个不同元素中，任取m（$m\le n$）个元素组成一个集合，叫做从n个不同元素中取出m个元素的一个组合; 从n个不同元素中取出m（$m\le n$）个元素的所有组合的个数，叫做从n个不同元素中取出m个元素的组合数。用符号$C_n^m$表示。

组合数计算公式：
$$
C_n^m=\frac{A_n^m}{m!}=\frac{n!}{m!(n-m)!}
$$
组合数也常用$\tbinom{n}{m}$表示，读作「n选m」，即$C_n^m=\tbinom{n}{m}$。

组合数也称「二项式系数」，因其与二项式定理有密切联系。



## 二、二项式定理

二项式定理阐明了一个展开式的系数：
$$
(a+b)^n=\sum_{i=0}^n\tbinom{n}{i}a^{n-i}b^i
$$
使用数学归纳法证明，利用$\tbinom{n}{k}+\tbinom{n}{k-1}=\tbinom{n+1}{k}$做归纳。

二项式定理也可以很容易扩展为多项式的形式：
$$
(x_1+x_2+...+x_t)^n=\sum_{n_1+n_2+...n_t=n的非负整数解}\tbinom{n}{n_1n_2...n_t}x_1^{n_1}x_2^{n_2}....x_t^{n_t}
$$
其中$\tbinom{n}{n_1n_2...n_t}$是多项式系数，具有如下性质：
$$
\sum \tbinom{n}{n_1n_2...n_t}=t^n
$$


## 三、排列与组合进阶

### 1. 多重集的排列数 | 多重组合数

**==多重集的排列数又称多重组合数！！！==**。一定要区分 **多重组合数** 与 **多重集的组合数**。

多重集是指包含重复元素的广义集合。设$S=\{n_1\cdot a_1,n_2\cdot a_2,...,n_k\cdot a_k \}$，表示由$n_1$个$a_1$，$n_2$个$a_2$，...，$n_k$个$a_k$组成的多重集。$S$的全排列个数为：
$$
\frac{n!}{\prod_{i=1}^k n_i!}=\frac{n!}{n_1!n_2!...n_k!}
$$
相当于把相同元素的排列数除掉了，即这**多重集的n个元素**的全排列数就是**多重集的排列数**。多重集的排列数又称多重组合数。
$$
\tbinom{n}{n_1,n_2,...,n_k}=\frac{n!}{\prod_{i=1}^kn_i!}
$$
可以发现，$\tbinom{n}{m}=\tbinom{n}{m,n-m}$。



### 2. 多重集的组合数

设$S=\{n_1\cdot a_1,n_2\cdot a_2,...,n_k\cdot a_k\}$，表示由$n_1$个$a_1$，$n_2$个$a_2$，...，$n_k$个$a_k$组成的多重集。那么对于整数$r$，从$S$中选择$r$个元素组成一个多重集的方案数就是**多重集的组合数**。

这个问题等价于$x_1+x_2+...+x_k=r$的非负整数解的个数，使用**插板法**解决:
$$
\tbinom{r+k-1}{k-1}
$$

> 插板法用于解决分组问题。
>
> 插空法用于解决不相邻问题。
>
> 捆绑法用于解决相邻问题。



### 3. 不相邻排列

$1\sim n$这$n$个自然数中选k个，这k个数中任何两个数都不相邻的组合有$\tbinom{n-k+1}{k}$种。

> 利用插空法解决这种不相邻问题。



### 4. 错位排列

错位排列就是：

$n$封不同的信，编号从1到n，现在要将这些信放在编号1到n的信封中，要求信封的编号与信的编号不一样的放置方法个数。

考虑到第n个信封，暂时将第n封信放在第n个信封中，考虑两种情况的递推：

+ 前面n - 1个信封全部装错。第n封和前面任意一封交换就行，共$f(n-1)\times (n-1)$种情况。
+ 前面n - 1个信封有一个没装错，其余全装错。将没装错的和n交换即可，共$f(n-2)\times(n-1)$种情况。

> 其他情况，我们不可能通过一次操作来把它变成一个长度为n的错排。

很明显可以得到错位排列的递推公式：
$$
f(n)=(n-1)(f(n-1)+f(n-2))
$$


### 5. 圆排列

n个人全部围成一圈，所有排列树记为$Q_n^n$，考虑其中已经排好的一圈，从不同位置断开，又变成不同的队列。所以有
$$
Q_n^n\times n=A_n^n\rightarrow Q_n^n=\frac{A_n^n}{n}=(n-1)!
$$
由此可知部分圆排列的公式：
$$
Q_n^r=\frac{A_n^r}{r}=\frac{n!}{r\times (n-r)!}
$$


## 四、组合数性质与二项式推论

